{
  "schemaVersion": "2.2",
  "description": "Rollback Plugfolio App",
  "parameters": {
    "DockerImageRepo": { "type": "String" },
    "LastKnownGoodTag": { "type": "String" },
    "Subdomain": { "type": "String" },
    "BucketName": { "type": "String" },
    "InternalPort": { "type": "String" }
  },
  "mainSteps": [
    {
      "action": "aws:runShellScript",
      "name": "runShellScript",
      "inputs": {
        "runCommand": [
          "aws s3 cp s3://{{ BucketName }}/rollback-app.sh /tmp/rollback-app.sh",
          "chmod +x /tmp/rollback-app.sh",
          "/bin/bash /tmp/rollback-app.sh {{ DockerImageRepo }} {{ LastKnownGoodTag }} {{ Subdomain }}"
        ]
      }
    }
  ]
}